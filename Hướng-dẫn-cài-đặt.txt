1. Yêu cầu hệ thống

Hệ điều hành:

Ubuntu 20.04+ / Debian tương đương

Hoặc Windows 10+ / macOS (đều chạy được)

Python 3.11+

Thư viện Python (được quản lý trong requirements.txt):

FastAPI, Uvicorn

OpenCV

Ultralytics / YOLO

TensorFlow / TensorFlow Lite (cho model embedding khuôn mặt)

PyMongo / driver MongoDB

python-dotenv, numpy, v.v.

Trình duyệt web hiện đại có hỗ trợ WebRTC:

Chrome, Firefox, Edge, Safari

MongoDB:

Khuyến nghị: MongoDB Atlas (cloud)

Hoặc: MongoDB cài trên máy local

Chỉ cần cấu hình đúng MONGODB_URI trong file .env

2. Clone mã nguồn
git clone https://github.com/trungkien5s/lock-ai.git
cd lock-ai

3. Tạo môi trường ảo & cài đặt thư viện

Linux / macOS:

python3 -m venv .venv
source .venv311/bin/activate


Windows:

python -m venv .venv
.venv311\Scripts\activate


Sau khi đã kích hoạt môi trường ảo, cài dependencies:

pip install --upgrade pip
pip install -r requirements.txt


✅ Lưu ý: Không dùng lệnh cũ kiểu pip install -r ultralytics fastapi ... nữa – repo đã gom hết vào requirements.txt rồi.

4. Cấu hình MongoDB (.env)

Tạo file .env ở thư mục gốc của project (cùng cấp backend/, frontend/), dựa trên .env.example và chỉnh lại:

MONGODB_URI=mongodb+srv://<user>:<password>@<cluster>/
MONGODB_DB_NAME=face_recognition_db

# Có thể giữ nguyên mặc định:
MONGODB_LOCKER_COLLECTION=lockers
MONGODB_SESSION_COLLECTION=locker_sessions


Nếu dùng MongoDB local, bạn có thể để kiểu:

MONGODB_URI=mongodb://localhost:27017/
MONGODB_DB_NAME=face_recognition_db

5. Chạy server

Có 2 cách:

Cách 1 – Dùng script run_server.py

python run_server.py


Script này sẽ gọi Uvicorn với app backend.main:app và port được cấu hình sẵn trong file run_server.py.

Cách 2 – Chạy trực tiếp Uvicorn

uvicorn backend.main:app --host 0.0.0.0 --port 8000 --reload

6. Truy cập giao diện web

Mở trình duyệt và truy cập:

http://localhost:8000


Cho phép trình duyệt truy cập camera.

Sử dụng các chức năng:

Lưu đồ (Store): nhấn nút tương ứng, nhìn vào camera, hệ thống sẽ gán embedding khuôn mặt với một tủ trống.

Lấy đồ (Retrieve): nhấn nút tương ứng, nhìn vào camera, hệ thống sẽ tìm session còn active khớp với khuôn mặt và mở đúng tủ.

7. (Tuỳ chọn) Chạy bằng Docker

Trong repo có sẵn Dockerfile và docker-compose.yml, bạn có thể dùng:

docker-compose up --build


Nhớ chạy lệnh này tại thư mục gốc của project (nơi chứa Dockerfile và docker-compose.yml).